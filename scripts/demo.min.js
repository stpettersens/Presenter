/*Copyright (c) 2012 Sam Saint-Pettersen. Requires jQuery 1.2+ (used: 1.7.2) for calculating offsets in mouse X and Y positions over the canvases.*/
function Caption(a,b,c,d){this.message=a;this.color=b;this.x=c;this.y=d;this.draw=function(){gContextOverlay.beginPath();gContextOverlay.rect(this.x,this.y,180,40);gContextOverlay.fillStyle=this.color;gContextOverlay.fill();gContextOverlay.lineWidth=.5;gContextOverlay.strokeStyle="#505050";gContextOverlay.stroke();gContextOverlay.font="10pt Verdana";gContextOverlay.fillStyle="#000000";gContextOverlay.fillText(this.message,this.x+10,this.y+25)};this.remove=function(){gContextOverlay.clearRect(0,0,gDemoOverlay.width,gDemoOverlay.height)}}function UIComponent(a,b,c){this.message=a;this.x=b;this.y=c;this.draw=function(){gContextUI.font="8pt Verdana";gContextUI.fillStyle="#FFFFFF";gContextUI.fillText(this.message,this.x,this.y)};this.update=function(a){this.remove();this.message=a;gContextUI.font="8pt Verdana";gContextUI.fillStyle="#FFFFFF";gContextUI.fillText(this.message,this.x,this.y)};this.fadeout=function(){window.setTimeout(this.remove,3e3)};this.remove=function(){gContextUI.clearRect(0,0,gDemoUI.width,gDemoUI.height)}}function showCaption(a){var b=new Caption("Y button - Show caption","#FFFF66",270,90);var c=new Caption("X button - Pause video","#3399FF",128,155);var d=new Caption("A button - Play video","#99CC66",265,225);var e=new Caption("B button - Exit player","#FF3333",402,155);var f=new Caption("RB - Increase volume","#A8A8A8",270,70);var g=new Caption("LB - Decrease volume","#A8A8A8",25,70);var h=new Caption("LS [Up] - Next video","#A8A8A8",20,110);var i=a||window.event;var j=$("#demo-overlay").offset();var k=i.pageX-j.left;var l=i.pageY-j.top;b.remove();if(k>339&&k<370&&l>130&&l<161){b.draw()}else if(k>307&&k<337&&l>161&&l<193){c.draw()}else if(k>336&&k<369&&l>196&&l<228){d.draw()}else if(k>372&&k<403&&l>160&&l<194){e.draw()}else if(k>317&&k<377&&l>99&&l<109){f.draw()}else if(k>94&&k<139&&l>99&&l<109){g.draw()}else if(k>80&&k<126&&l>147&&l<164){h.draw()}}function controlBehavior(a){var b=["Autumn Day","JavaScript Uncovered","Max Payne 3 trailer"];var c=["A.B Peabody","Karl Schultz","Rockstar Games"];var d=new UIComponent(b[gIndex-1],470,39);var e=new UIComponent(c[gIndex-1],470,50);var f=a||window.event;var g=$("#demo-ui").offset();var h=f.pageX-g.left;var i=f.pageY-g.top;if(!gSticky)d.remove();if(h>339&&h<370&&i>130&&i<161){if(!gSticky){d.draw();e.draw()}}else if(h>307&&h<337&&i>161&&i<193){if(!gSticky)d.update("Paused.")}else if(h>336&&h<369&&i>196&&i<228){if(!gSticky)d.update("Playing.")}else if(h>372&&h<403&&i>160&&i<194){window.location.href="./"}else if(h>317&&h<377&&i>99&&i<109){if(!gSticky)d.update("Volume+")}else if(h>94&&h<139&&i>99&&i<109){if(!gSticky)d.update("Volume-")}else if(h>80&&h<126&&i>147&&i<164){if(gIndex<b.length)gIndex++;else gIndex=1;drawBackground(gVideos[gIndex-1])}if(!gSticky)d.fadeout()}function loadImages(a,b){var c={};var d=0;var e=0;for(var f in a){e++}for(var f in a){c[f]=new Image;c[f].onload=function(){if(++d>=e){b(c)}};c[f].src=a[f]}}function drawBackground(a){gContextBase.clearRect(0,0,gDemoBase.width,gDemoBase.height);gContextBase.drawImage(gGamepad,20,100);gContextBase.drawImage(a,465,10);gContextBase.font="italic 12pt Verdana";gContextBase.fillText("Demonstration",5,20)}var gVideos,gGamepad,gDemoBase,gDemoUI,gDemoOverlay;var gContextBase,gContextUI,gContextOverlay;var gIndex=1;var gSticky=false;window.onload=function(){gDemoBase=document.getElementById("demo-base");gContextBase=gDemoBase.getContext("2d");gDemoUI=document.getElementById("demo-ui");gContextUI=gDemoUI.getContext("2d");gDemoOverlay=document.getElementById("demo-overlay");gContextOverlay=gDemoOverlay.getContext("2d");var a={xbgp:"images/demo/xbgp.jpg",vid1:"images/demo/vid1.png",vid2:"images/demo/vid2.png",vid3:"images/demo/vid3.png"};gVideos=[];loadImages(a,function(a){gGamepad=a.xbgp;gVideos[0]=a.vid1;gVideos[1]=a.vid2;gVideos[2]=a.vid3;drawBackground(gVideos[0])});gDemoOverlay.addEventListener("mousemove",showCaption,false);gDemoOverlay.addEventListener("click",controlBehavior,false)}